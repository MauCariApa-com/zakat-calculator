---
import Layout from '../layouts/Layout.astro';
import ZakatEmasCard from '../components/ZakatEmasCard.astro';
import ZakatPerakCard from '../components/ZakatPerakCard.astro';
import ZakatMalCard from '../components/ZakatMalCard.astro';
import ZakatPenghasilanCard from '../components/ZakatPenghasilanCard.astro';
import DalilEmasCard from '../components/DalilEmasCard.astro';
import DalilPerakCard from '../components/DalilPerakCard.astro';
import DalilMalCard from '../components/DalilMalCard.astro';
import DalilPenghasilanCard from '../components/DalilPenghasilanCard.astro';
import FAQ from '../components/FAQ.astro';
---

<Layout title="Zakat Calculator - Calculate Your Zakat Easily">
  <!-- Hero Section -->
  <section class="relative bg-gradient-to-br from-islamic-green via-islamic-green-dark to-emerald-900 text-white py-20 overflow-hidden">
    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-10 left-10 w-32 h-32 border border-white rounded-full"></div>
      <div class="absolute top-32 right-20 w-24 h-24 border border-white rounded-full"></div>
      <div class="absolute bottom-20 left-1/4 w-16 h-16 border border-white rounded-full"></div>
      <div class="absolute bottom-32 right-1/3 w-20 h-20 border border-white rounded-full"></div>
    </div>
    
    <div class="container mx-auto px-4 text-center relative z-10">
      <div class="max-w-4xl mx-auto">
        <!-- Logo Icon -->
        <div class="w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-6 backdrop-blur-sm">
          <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
        </div>
        
        <h1 class="text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-white to-islamic-cream bg-clip-text text-transparent">
          Zakat Calculator
        </h1>
        <p class="text-xl md:text-2xl mb-8 text-islamic-cream max-w-3xl mx-auto leading-relaxed">
          Calculate your zakat easily and accurately according to Islamic law. 
          A modern application that helps Muslims fulfill their zakat obligations correctly.
        </p>
        
        <!-- Quick Stats -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto mb-8">
          <div class="bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm">
            <div class="text-2xl font-bold">4</div>
            <div class="text-sm text-islamic-cream">Zakat Types</div>
          </div>
          <div class="bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm">
            <div class="text-2xl font-bold">100%</div>
            <div class="text-sm text-islamic-cream">Accurate</div>
          </div>
          <div class="bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm">
            <div class="text-2xl font-bold">✓</div>
            <div class="text-sm text-islamic-cream">Sharia</div>
          </div>
          <div class="bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm">
            <div class="text-2xl font-bold">∞</div>
            <div class="text-sm text-islamic-cream">Free</div>
          </div>
        </div>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="#calculator" class="bg-white text-islamic-green hover:bg-islamic-cream font-semibold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg">
            Start Calculating Zakat
          </a>
          <a href="/about" class="border-2 border-white text-white hover:bg-white hover:text-islamic-green font-semibold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105">
            Learn More
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Calculator Section -->
  <section id="calculator" class="py-20 bg-gradient-to-b from-gray-50 to-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <div class="inline-flex items-center justify-center w-16 h-16 bg-islamic-green rounded-full mb-6">
          <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
          </svg>
        </div>
        <h2 class="text-4xl md:text-5xl font-bold text-islamic-green mb-6">
          Choose Zakat Type
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
          Each calculator includes relevant Islamic evidence and accurate calculations according to Islamic law.
        </p>
      </div>

      <!-- Zakat Cards Grid -->
      <div class="grid grid-cols-1 xl:grid-cols-2 gap-8 max-w-7xl mx-auto">
        <!-- Gold Zakat -->
        <div class="group">
          <ZakatEmasCard />
          <DalilEmasCard />
        </div>

        <!-- Silver Zakat -->
        <div class="group">
          <ZakatPerakCard />
          <DalilPerakCard />
        </div>

        <!-- Wealth Zakat -->
        <div class="group">
          <ZakatMalCard />
          <DalilMalCard />
        </div>

        <!-- Income Zakat -->
        <div class="group">
          <ZakatPenghasilanCard />
          <DalilPenghasilanCard />
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-20 bg-gradient-to-r from-islamic-green to-islamic-green-dark text-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <h2 class="text-4xl md:text-5xl font-bold mb-6">
          Why Choose Our Calculator?
        </h2>
        <p class="text-xl text-islamic-cream max-w-3xl mx-auto">
          A modern application with cutting-edge technology to help you fulfill your zakat obligations correctly
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-6xl mx-auto">
        <div class="text-center group">
          <div class="w-16 h-16 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:bg-opacity-30 transition-all duration-300 backdrop-blur-sm">
            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <h3 class="text-xl font-semibold mb-3">100% Accurate</h3>
          <p class="text-islamic-cream">Calculations according to Islamic law verified by scholars</p>
        </div>

        <div class="text-center group">
          <div class="w-16 h-16 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:bg-opacity-30 transition-all duration-300 backdrop-blur-sm">
            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
          </div>
          <h3 class="text-xl font-semibold mb-3">Complete Evidence</h3>
          <p class="text-islamic-cream">Includes Quranic verses and authentic hadiths for each zakat type</p>
        </div>

        <div class="text-center group">
          <div class="w-16 h-16 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:bg-opacity-30 transition-all duration-300 backdrop-blur-sm">
            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
            </svg>
          </div>
          <h3 class="text-xl font-semibold mb-3">Easy to Use</h3>
          <p class="text-islamic-cream">Modern and intuitive interface that anyone can use</p>
        </div>

        <div class="text-center group">
          <div class="w-16 h-16 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:bg-opacity-30 transition-all duration-300 backdrop-blur-sm">
            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
            </svg>
          </div>
          <h3 class="text-xl font-semibold mb-3">Safe & Private</h3>
          <p class="text-islamic-cream">Your data is not stored on servers, all calculations are done in your browser</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <FAQ />

  <!-- Call to Action -->
  <section class="py-20 bg-gradient-to-br from-islamic-cream to-white">
    <div class="container mx-auto px-4 text-center">
      <div class="max-w-4xl mx-auto">
        <div class="w-20 h-20 bg-islamic-green rounded-full flex items-center justify-center mx-auto mb-8">
          <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"/>
          </svg>
        </div>
        <h2 class="text-4xl md:text-5xl font-bold text-islamic-green mb-6">
          Pay Your Zakat Today
        </h2>
        <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto leading-relaxed">
          Don't delay your zakat obligation. Use the calculator above to find out how much zakat you need to pay according to Islamic law.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="#calculator" class="bg-islamic-green hover:bg-islamic-green-dark text-white font-semibold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg">
            Calculate Zakat Now
          </a>
          <a href="/contact" class="border-2 border-islamic-green text-islamic-green hover:bg-islamic-green hover:text-white font-semibold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105">
            Contact Us
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- JavaScript for Calculator -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const forms = document.querySelectorAll('.zakat-form');
      
      forms.forEach(form => {
        form.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const zakatType = this.dataset.zakatType;
          const formData = new FormData(this);
          const resultDiv = document.getElementById(`result-${zakatType}`);
          
          if (!resultDiv) return;
          
          let zakatAmount = 0;
          let totalWealth = 0;
          let nisabValue = 0;
          let isObligatory = false;
          
          // Calculate based on zakat type
          switch(zakatType) {
            case 'gold-zakat':
              const goldWeight = parseFloat(formData.get('goldWeight') || '0');
              const goldPrice = parseFloat(formData.get('goldPrice') || '0');
              const goldNisab = 85; // grams
              
              totalWealth = goldWeight * goldPrice;
              nisabValue = goldNisab * goldPrice;
              isObligatory = goldWeight >= goldNisab;
              
              if (isObligatory) {
                zakatAmount = totalWealth * 0.025;
              }
              break;
              
            case 'silver-zakat':
              const silverWeight = parseFloat(formData.get('silverWeight') || '0');
              const silverPrice = parseFloat(formData.get('silverPrice') || '0');
              const silverNisab = 595; // grams
              
              totalWealth = silverWeight * silverPrice;
              nisabValue = silverNisab * silverPrice;
              isObligatory = silverWeight >= silverNisab;
              
              if (isObligatory) {
                zakatAmount = totalWealth * 0.025;
              }
              break;
              
            case 'wealth-zakat':
              const cash = parseFloat(formData.get('cash') || '0');
              const savings = parseFloat(formData.get('savings') || '0');
              const deposits = parseFloat(formData.get('deposits') || '0');
              const investments = parseFloat(formData.get('investments') || '0');
              const goldPriceNisab = parseFloat(formData.get('goldPriceNisab') || '0');
              
              totalWealth = cash + savings + deposits + investments;
              nisabValue = 85 * goldPriceNisab; // 85 grams of gold
              isObligatory = totalWealth >= nisabValue;
              
              if (isObligatory) {
                zakatAmount = totalWealth * 0.025;
              }
              break;
              
            case 'income-zakat':
              const basicSalary = parseFloat(formData.get('basicSalary') || '0');
              const allowances = parseFloat(formData.get('allowances') || '0');
              const bonuses = parseFloat(formData.get('bonuses') || '0');
              const otherIncome = parseFloat(formData.get('otherIncome') || '0');
              const goldPriceNisabIncome = parseFloat(formData.get('goldPriceNisab') || '0');
              
              totalWealth = basicSalary + allowances + bonuses + otherIncome;
              nisabValue = 85 * goldPriceNisabIncome; // 85 grams of gold
              isObligatory = totalWealth >= nisabValue;
              
              if (isObligatory) {
                zakatAmount = totalWealth * 0.025;
              }
              break;
          }
          
          // Format currency
          const formatCurrency = (amount) => {
            return new Intl.NumberFormat('en-US', {
              style: 'currency',
              currency: 'USD',
              minimumFractionDigits: 0,
              maximumFractionDigits: 0
            }).format(amount);
          };
          
          // Display results
          const resultContent = resultDiv.querySelector('.result-content');
          if (resultContent) {
            if (isObligatory) {
              resultContent.innerHTML = `
                <div class="space-y-4">
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-white rounded-lg p-4 border border-green-200">
                      <div class="text-sm text-green-600 font-medium mb-1">Total Wealth</div>
                      <div class="text-xl font-bold text-gray-800">${formatCurrency(totalWealth)}</div>
                    </div>
                    <div class="bg-white rounded-lg p-4 border border-green-200">
                      <div class="text-sm text-green-600 font-medium mb-1">Nisab</div>
                      <div class="text-xl font-bold text-gray-800">${formatCurrency(nisabValue)}</div>
                    </div>
                  </div>
                  <div class="bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg p-6 text-white">
                    <div class="text-center">
                      <div class="text-sm font-medium mb-2">Zakat Due</div>
                      <div class="text-3xl font-bold">${formatCurrency(zakatAmount)}</div>
                    </div>
                  </div>
                  <div class="bg-green-100 border border-green-300 rounded-lg p-4">
                    <div class="flex items-center">
                      <svg class="w-5 h-5 text-green-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                      </svg>
                      <div>
                        <div class="font-semibold text-green-800">Zakat is Obligatory</div>
                        <div class="text-green-700 text-sm">Your wealth has reached the nisab, so you must pay zakat.</div>
                      </div>
                    </div>
                  </div>
                </div>
              `;
            } else {
              resultContent.innerHTML = `
                <div class="space-y-4">
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-white rounded-lg p-4 border border-yellow-200">
                      <div class="text-sm text-yellow-600 font-medium mb-1">Total Wealth</div>
                      <div class="text-xl font-bold text-gray-800">${formatCurrency(totalWealth)}</div>
                    </div>
                    <div class="bg-white rounded-lg p-4 border border-yellow-200">
                      <div class="text-sm text-yellow-600 font-medium mb-1">Nisab</div>
                      <div class="text-xl font-bold text-gray-800">${formatCurrency(nisabValue)}</div>
                    </div>
                  </div>
                  <div class="bg-yellow-100 border border-yellow-300 rounded-lg p-4">
                    <div class="flex items-center">
                      <svg class="w-5 h-5 text-yellow-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                      </svg>
                      <div>
                        <div class="font-semibold text-yellow-800">Zakat Not Yet Obligatory</div>
                        <div class="text-yellow-700 text-sm">Your wealth has not reached the nisab, so zakat is not yet obligatory. However, you are still encouraged to give charity.</div>
                      </div>
                    </div>
                  </div>
                </div>
              `;
            }
          }
          
          // Show result with animation
          resultDiv.classList.remove('hidden');
          resultDiv.style.opacity = '0';
          resultDiv.style.transform = 'translateY(20px)';
          
          setTimeout(() => {
            resultDiv.style.transition = 'all 0.5s ease-out';
            resultDiv.style.opacity = '1';
            resultDiv.style.transform = 'translateY(0)';
          }, 100);
          
          // Scroll to result
          setTimeout(() => {
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          }, 200);
        });
      });
    });
  </script>
</Layout>